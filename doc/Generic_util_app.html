<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Generic_util_fun.html">
<link rel="next" href="Generic_util_monoid.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Generic_util" rel="Chapter" href="Generic_util.html">
<link title="Generic_core" rel="Chapter" href="Generic_core.html">
<link title="Generic_view" rel="Chapter" href="Generic_view.html">
<link title="Generic_fun" rel="Chapter" href="Generic_fun.html">
<link title="Generic_util_fun" rel="Chapter" href="Generic_util_fun.html">
<link title="Generic_util_app" rel="Chapter" href="Generic_util_app.html">
<link title="Generic_util_monoid" rel="Chapter" href="Generic_util_monoid.html">
<link title="Generic_util_functor" rel="Chapter" href="Generic_util_functor.html">
<link title="Generic_util_applicative" rel="Chapter" href="Generic_util_applicative.html">
<link title="Generic_util_monad" rel="Chapter" href="Generic_util_monad.html">
<link title="Generic_util_hash" rel="Chapter" href="Generic_util_hash.html">
<link title="Generic_util_iter" rel="Chapter" href="Generic_util_iter.html">
<link title="Generic_util_list" rel="Chapter" href="Generic_util_list.html">
<link title="Generic_util_misc" rel="Chapter" href="Generic_util_misc.html">
<link title="Generic_util_exn" rel="Chapter" href="Generic_util_exn.html">
<link title="Generic_util_obj" rel="Chapter" href="Generic_util_obj.html">
<link title="Generic_util_obj_inspect" rel="Chapter" href="Generic_util_obj_inspect.html">
<link title="Generic_util_sum" rel="Chapter" href="Generic_util_sum.html">
<link title="Generic_util_option" rel="Chapter" href="Generic_util_option.html">
<link title="Generic_core_ty" rel="Chapter" href="Generic_core_ty.html">
<link title="Generic_core_product" rel="Chapter" href="Generic_core_product.html">
<link title="Generic_core_desc" rel="Chapter" href="Generic_core_desc.html">
<link title="Generic_core_ty_desc" rel="Chapter" href="Generic_core_ty_desc.html">
<link title="Generic_core_patterns" rel="Chapter" href="Generic_core_patterns.html">
<link title="Generic_core_extensible" rel="Chapter" href="Generic_core_extensible.html">
<link title="Generic_core_consumer" rel="Chapter" href="Generic_core_consumer.html">
<link title="Generic_core_desc_fun" rel="Chapter" href="Generic_core_desc_fun.html">
<link title="Generic_core_antiunify" rel="Chapter" href="Generic_core_antiunify.html">
<link title="Generic_core_repr" rel="Chapter" href="Generic_core_repr.html">
<link title="Generic_core_equal" rel="Chapter" href="Generic_core_equal.html">
<link title="Generic_view_spine" rel="Chapter" href="Generic_view_spine.html">
<link title="Generic_view_sumprod" rel="Chapter" href="Generic_view_sumprod.html">
<link title="Generic_view_conlist" rel="Chapter" href="Generic_view_conlist.html">
<link title="Generic_fun_uniplate" rel="Chapter" href="Generic_fun_uniplate.html">
<link title="Generic_fun_multiplate" rel="Chapter" href="Generic_fun_multiplate.html">
<link title="Generic_fun_deepfix" rel="Chapter" href="Generic_fun_deepfix.html">
<link title="Generic_fun_marshal" rel="Chapter" href="Generic_fun_marshal.html">
<link title="Generic_fun_equal" rel="Chapter" href="Generic_fun_equal.html">
<link title="Generic_fun_show" rel="Chapter" href="Generic_fun_show.html">
<link title="Generic" rel="Chapter" href="Generic.html"><link title="Type Application" rel="Section" href="#2_TypeApplication">
<link title="Core parametric  types" rel="Subsection" href="#3_Coreparametrictypes">
<link title="Identity Functor" rel="Subsection" href="#3_IdentityFunctor">
<link title="Constant Functor" rel="Subsection" href="#3_ConstantFunctor">
<link title="Exponential Functor" rel="Subsection" href="#3_ExponentialFunctor">
<link title="Functor Composition" rel="Subsection" href="#3_FunctorComposition">
<title>Generic Programming Library : Generic_util_app</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Generic_util_fun.html" title="Generic_util_fun">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Generic_util_monoid.html" title="Generic_util_monoid">Next</a>
</div>
<h1>Module <a href="type_Generic_util_app.html">Generic_util_app</a></h1>

<pre><span class="keyword">module</span> Generic_util_app: <code class="code">sig</code> <a href="Generic_util_app.html">..</a> <code class="code">end</code></pre><div class="info module top">
Type application and defunctionalisation.
<p>

    In OCaml parametric types cannot be partially applied:
    they must be saturated, all parameters must be given for
    a type expression to be valid. Therefore we cannot
    easily abstract over polymorphic type constructors and
    generalise the type of the List.map function:
<p>

    <pre class="codepre"><code class="code">val map : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list</code></pre>
<p>

    Since the syntax doesn't allow to replace <code class="code">list</code> with a type variable:
<p>

    <pre class="codepre"><code class="code">val invalidmap : ('a -&gt; 'b) -&gt; 'a 'f -&gt; 'b 'f</code></pre>
<p>

    The purpose of this module is to be able to write such
    generalisation using defunctionalisation as described in
    the article "Lightweight Higher-Kinded Polymorphism" by
    Jeremy Yallop and Leo White.
<p>

    The type <code class="code">'a 'f</code> is not valid, but we may write <code class="code">('a,'f) app</code>,
    where the type <code class="code">app</code> is an extensible gadt.
    To each polymorphic type <code class="code">'a p</code>, we will associate an abstract type
    <code class="code">p'</code> which is interpreted by the gadt <code class="code">app</code> such that:
    <code class="code">('a, p') app</code> is isomorphic to <code class="code">'a p</code>.
<p>

    For instance, to represent the <code class="code">list</code> type constructor,
    we define the abstract type <code class="code">list'</code>:
<p>

    <pre class="codepre"><code class="code">type list'</code></pre>
<p>

    and we add a <code class="code">List</code> constructor to <code class="code">app</code>:
<p>

    <pre class="codepre"><code class="code">type (_,_) app += List : 'a list -&gt; ('a, list') app</code></pre>
<p>

    The generalised <code class="code">map</code> may then be typed:
<p>

    <pre class="codepre"><code class="code">val map : ('a -&gt; 'b) -&gt; ('a,'f) app -&gt; ('b,'f) app</code></pre>
<p>

    <b>Uses of <code class="code">app</code> in the generic library</b>.
<p>

    <code class="code">app</code> is used to define extensible type indexed functions, see
    <a href="Generic_core_extensible.html"><code class="code">Generic_core_extensible</code></a>.<br>
</div>
<hr width="100%">
<br>
<h2 id="2_TypeApplication">Type Application</h2><br>

<pre><span class="keyword">module</span> <a href="Generic_util_app.T.html">T</a>: <code class="code">sig</code> <a href="Generic_util_app.T.html">..</a> <code class="code">end</code></pre><div class="info">
Module defining the types <a href="Generic_util_app.T.html#TYPEapp"><code class="code">Generic_util_app.T.app</code></a>.
</div>

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">('a, 'b)</code> t</span> = <code class="type">('a, 'b) <a href="Generic_util_app.T.html#TYPEapp">T.app</a></code> </pre>
<div class="info ">
Synonym for convenience, when namespace <code class="code">Generic_util</code> is
    opened, and one doesn't want to open <code class="code">App.T</code>, one can
    refer to <code class="code">App.T.app</code> as <code class="code">App.t</code>.<br>
</div>

<br>
<h3 id="3_Coreparametrictypes">Core parametric  types</h3><br>

<pre><span id="TYPEoption'"><span class="keyword">type</span> <code class="type"></code>option'</span> </pre>

<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONOption">Option</span> <span class="keyword">:</span> <code class="type">'a option</code> <span class="keyword">-></span> <code class="type">('a, <a href="Generic_util_app.html#TYPEoption'">option'</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>



<pre><span id="VALget_option"><span class="keyword">val</span> get_option</span> : <code class="type">('a, <a href="Generic_util_app.html#TYPEoption'">option'</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'a option</code></pre>
<pre><span id="TYPElist'"><span class="keyword">type</span> <code class="type"></code>list'</span> </pre>

<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONList">List</span> <span class="keyword">:</span> <code class="type">'a list</code> <span class="keyword">-></span> <code class="type">('a, <a href="Generic_util_app.html#TYPElist'">list'</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>



<pre><span id="VALget_list"><span class="keyword">val</span> get_list</span> : <code class="type">('a, <a href="Generic_util_app.html#TYPElist'">list'</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'a list</code></pre>
<pre><span id="TYPEarray'"><span class="keyword">type</span> <code class="type"></code>array'</span> </pre>

<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONArray">Array</span> <span class="keyword">:</span> <code class="type">'a array</code> <span class="keyword">-></span> <code class="type">('a, <a href="Generic_util_app.html#TYPEarray'">array'</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>



<pre><span id="VALget_array"><span class="keyword">val</span> get_array</span> : <code class="type">('a, <a href="Generic_util_app.html#TYPEarray'">array'</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'a array</code></pre><br>
<h3 id="3_IdentityFunctor">Identity Functor</h3><br>

<pre><code><span id="TYPEid"><span class="keyword">type</span> <code class="type"></code>id</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTid.ID"><span class="constructor">ID</span></span></code></td>

</tr></table>


<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONId">Id</span> <span class="keyword">:</span> <code class="type">'a</code> <span class="keyword">-></span> <code class="type">('a, <a href="Generic_util_app.html#TYPEid">id</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>



<pre><span id="VALget_id"><span class="keyword">val</span> get_id</span> : <code class="type">('a, <a href="Generic_util_app.html#TYPEid">id</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'a</code></pre><br>
<h3 id="3_ConstantFunctor">Constant Functor</h3><br>

<pre><code><span id="TYPEconst"><span class="keyword">type</span> <code class="type">'t</code> const</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTconst.CONST"><span class="constructor">CONST</span></span></code></td>

</tr></table>

<div class="info ">
The type <code class="code">'t const</code> doesn't build useful values, we use
    it as a "code" to be interpreted by <code class="code">app</code> so that <code class="code">('a, 't
    const) app</code> is isomorphic to <code class="code">'t</code>.
<p>

    It would have been better to make <code class="code">'t const</code> an abstract
    type, but it then makes typechecking troublesome for the
    constructor <code class="code">Const : 't -&gt; ('a, 't const) app</code><br>
</div>

<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONConst">Const</span> <span class="keyword">:</span> <code class="type">'b</code> <span class="keyword">-></span> <code class="type">('a, 'b <a href="Generic_util_app.html#TYPEconst">const</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>

<div class="info ">
<code class="code">('a, 'b const) app</code> is isomorphic to <code class="code">'t</code><br>
</div>


<pre><span id="VALget_const"><span class="keyword">val</span> get_const</span> : <code class="type">('a, 'b <a href="Generic_util_app.html#TYPEconst">const</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'b</code></pre><div class="info ">
Get the argument of the <code class="code">Const</code> constructor<br>
</div>
<br>
<h3 id="3_ExponentialFunctor">Exponential Functor</h3><br>

<pre><code><span id="TYPEexponential"><span class="keyword">type</span> <code class="type">'b</code> exponential</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTexponential.EXPONENTIAL"><span class="constructor">EXPONENTIAL</span></span></code></td>

</tr></table>

<div class="info ">
The type <code class="code">'b exponential</code> doesn't build useful values,
    consider it abstract. We use it as a "code" to be
    interpreted by <code class="code">app</code> so that <code class="code">('a, 'b exponential) app</code> is
    isomorphic to <code class="code">'a -&gt; 'b</code>.<br>
</div>

<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONExponential">Exponential</span> <span class="keyword">:</span> <code class="type">('a -> 'b)</code> <span class="keyword">-></span> <code class="type">('a, 'b <a href="Generic_util_app.html#TYPEexponential">exponential</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>

<div class="info ">
<code class="code">('a, 'b exponential) app</code> is isomorphic to <code class="code">'a -&gt; 'b</code>.<br>
</div>


<pre><span id="VALget_exponential"><span class="keyword">val</span> get_exponential</span> : <code class="type">('a, 'b <a href="Generic_util_app.html#TYPEexponential">exponential</a>) <a href="Generic_util_app.html#TYPEt">t</a> -> 'a -> 'b</code></pre><div class="info ">
Get the argument of the <code class="code">Exponential</code> constructor<br>
</div>
<br>
<h3 id="3_FunctorComposition">Functor Composition</h3><br>

<pre><code><span id="TYPEcomp"><span class="keyword">type</span> <code class="type">('f, 'g)</code> comp</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTcomp.COMP"><span class="constructor">COMP</span></span></code></td>

</tr></table>


<pre><code><span class="keyword">type</span> <code class="type">('_, '_)</code> <a href="Generic_util_app.html#TYPEt">t</a> += </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="EXTENSIONComp">Comp</span> <span class="keyword">:</span> <code class="type">(('a, 'f) <a href="Generic_util_app.html#TYPEt">t</a>, 'g) <a href="Generic_util_app.html#TYPEt">t</a></code> <span class="keyword">-></span> <code class="type">('a, ('f, 'g) <a href="Generic_util_app.html#TYPEcomp">comp</a>) <a href="Generic_util_app.html#TYPEt">t</a></code></code></td>

</tr></table>



<pre><span id="VALget_comp"><span class="keyword">val</span> get_comp</span> : <code class="type">('a, ('f, 'g) <a href="Generic_util_app.html#TYPEcomp">comp</a>) <a href="Generic_util_app.html#TYPEt">t</a> -><br>       (('a, 'f) <a href="Generic_util_app.html#TYPEt">t</a>, 'g) <a href="Generic_util_app.html#TYPEt">t</a></code></pre></body></html>